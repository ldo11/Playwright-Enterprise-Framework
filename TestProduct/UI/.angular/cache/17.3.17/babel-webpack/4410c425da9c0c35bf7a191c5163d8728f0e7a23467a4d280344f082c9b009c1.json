{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormBuilder, Validators } from '@angular/forms';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatDialogRef, MatDialogModule, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { ClientService } from '../../services/client.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/input\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/select\";\nimport * as i7 from \"@angular/material/core\";\nimport * as i8 from \"@angular/material/datepicker\";\nimport * as i9 from \"@angular/material/dialog\";\nfunction ClientFormComponent_mat_option_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", s_r2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(s_r2);\n  }\n}\nexport let ClientFormComponent = /*#__PURE__*/(() => {\n  class ClientFormComponent {\n    constructor(data) {\n      this.data = data;\n      this.fb = inject(FormBuilder);\n      this.clientService = inject(ClientService);\n      this.dialogRef = inject(MatDialogRef);\n      this.snack = inject(MatSnackBar);\n      this.loading = false;\n      this.sexes = ['Male', 'Female', 'N/A'];\n      this.form = this.fb.group({\n        firstName: ['', Validators.required],\n        lastName: ['', Validators.required],\n        dob: [null, Validators.required],\n        sex: ['Male', Validators.required]\n      });\n      const client = data?.client;\n      if (client) {\n        this.form.patchValue({\n          firstName: client.firstName,\n          lastName: client.lastName,\n          dob: client.dob ? new Date(client.dob) : null,\n          sex: client.sex\n        });\n      }\n    }\n    get isEdit() {\n      return !!this.data?.client;\n    }\n    get title() {\n      return this.isEdit ? 'Client Detail' : 'Add Client';\n    }\n    close(result) {\n      this.dialogRef.close(result);\n    }\n    save() {\n      if (this.form.invalid || this.loading) return;\n      this.loading = true;\n      const value = this.form.value;\n      const isEdit = this.isEdit;\n      const clientId = this.data?.client?.id;\n      const request$ = isEdit && clientId != null ? this.clientService.updateClient(clientId, value) : this.clientService.createClient(value);\n      request$.subscribe({\n        next: () => {\n          this.snack.open(isEdit ? 'Client updated' : 'Client created', 'Dismiss', {\n            duration: 2000\n          });\n          this.dialogRef.close(true);\n        },\n        error: err => {\n          console.error(err);\n          this.snack.open(isEdit ? 'Failed to update client' : 'Failed to create client', 'Dismiss', {\n            duration: 3000\n          });\n          this.loading = false;\n        }\n      });\n    }\n    static {\n      this.ɵfac = function ClientFormComponent_Factory(t) {\n        return new (t || ClientFormComponent)(i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ClientFormComponent,\n        selectors: [[\"app-client-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 29,\n        vars: 7,\n        consts: [[\"picker\", \"\"], [\"mat-dialog-title\", \"\"], [\"mat-dialog-content\", \"\"], [3, \"formGroup\"], [\"appearance\", \"outline\", 1, \"w-100\"], [\"matInput\", \"\", \"formControlName\", \"firstName\", \"required\", \"\"], [\"matInput\", \"\", \"formControlName\", \"lastName\", \"required\", \"\"], [\"matInput\", \"\", \"formControlName\", \"dob\", \"required\", \"\", 3, \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"formControlName\", \"sex\", \"required\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"mat-dialog-actions\", \"\", \"align\", \"end\"], [\"mat-button\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", \"disabled\"], [3, \"value\"]],\n        template: function ClientFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"h2\", 1);\n            i0.ɵɵtext(1);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"div\", 2)(3, \"form\", 3)(4, \"mat-form-field\", 4)(5, \"mat-label\");\n            i0.ɵɵtext(6, \"First Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(7, \"input\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"mat-form-field\", 4)(9, \"mat-label\");\n            i0.ɵɵtext(10, \"Last Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(11, \"input\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"mat-form-field\", 4)(13, \"mat-label\");\n            i0.ɵɵtext(14, \"Date of Birth\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(15, \"input\", 7)(16, \"mat-datepicker-toggle\", 8)(17, \"mat-datepicker\", null, 0);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"mat-form-field\", 4)(20, \"mat-label\");\n            i0.ɵɵtext(21, \"Sex\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"mat-select\", 9);\n            i0.ɵɵtemplate(23, ClientFormComponent_mat_option_23_Template, 2, 2, \"mat-option\", 10);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(24, \"div\", 11)(25, \"button\", 12);\n            i0.ɵɵlistener(\"click\", function ClientFormComponent_Template_button_click_25_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.close(false));\n            });\n            i0.ɵɵtext(26, \"Cancel\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function ClientFormComponent_Template_button_click_27_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.save());\n            });\n            i0.ɵɵtext(28);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            const picker_r3 = i0.ɵɵreference(18);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate(ctx.title);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(12);\n            i0.ɵɵproperty(\"matDatepicker\", picker_r3);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"for\", picker_r3);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngForOf\", ctx.sexes);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"disabled\", ctx.form.invalid || ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Saving...\" : \"Save\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i1.NgForOf, ReactiveFormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.FormGroupDirective, i2.FormControlName, MatFormFieldModule, i3.MatFormField, i3.MatLabel, i3.MatSuffix, MatInputModule, i4.MatInput, MatButtonModule, i5.MatButton, MatSelectModule, i6.MatSelect, i7.MatOption, MatDatepickerModule, i8.MatDatepicker, i8.MatDatepickerInput, i8.MatDatepickerToggle, MatNativeDateModule, MatSnackBarModule, MatDialogModule, i9.MatDialogTitle, i9.MatDialogActions, i9.MatDialogContent],\n        styles: [\".w-100[_ngcontent-%COMP%]{width:100%}\"]\n      });\n    }\n  }\n  return ClientFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}